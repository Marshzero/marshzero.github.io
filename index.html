<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="种一棵树最好的时间是十年前，其次是现在。">
<meta property="og:type" content="website">
<meta property="og:title" content="Yzy&#39;s blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Yzy&#39;s blog">
<meta property="og:description" content="种一棵树最好的时间是十年前，其次是现在。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Yang Zeyu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Yzy's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yzy's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/Marshzero" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/09/Hexo%20NexT%20%E5%AD%97%E4%BD%93%E7%BE%8E%E5%8C%96%20%E7%B1%BBMeme/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/09/Hexo%20NexT%20%E5%AD%97%E4%BD%93%E7%BE%8E%E5%8C%96%20%E7%B1%BBMeme/" class="post-title-link" itemprop="url">Hexo NexT 字体美化 类Meme</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-09 18:22:52" itemprop="dateCreated datePublished" datetime="2021-12-09T18:22:52+08:00">2021-12-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:44:44" itemprop="dateModified" datetime="2021-12-14T19:44:44+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在网上逛到了用Hugo做的博客，发现Meme主题很好看，研究了一会，发现主要是字体好看，也不打算迁移了，于是便开始设置Hexo的NexT主题为相应的字体。</p>
<p>本人配置：</p>
<ul>
<li>Win10</li>
<li>hexo: 5.2.0</li>
<li>hexo-cli: 4.2.0</li>
<li>node: 12.19.0</li>
<li>NexT主题Pisces样式</li>
</ul>
<h2 id="更换字体"><a href="#更换字体" class="headerlink" title="更换字体"></a>更换字体</h2><p>Hugo Meme主题字体：<code>思源宋体 Noto Serif Simplified Chinese</code></p>
<p>Google Font：<a target="_blank" rel="noopener" href="https://fonts.google.com/noto/specimen/Noto+Serif+SC">https://fonts.google.com/noto/specimen/Noto+Serif+SC</a></p>
<p>在Hexo Next中更改字体样式，只需要更改NexT的配置文件themes\next_config.yml</p>
<p>将font的enable改为true，并将其中所有的模块的字体都写上Noto Serif SC，这样hexo会自动从<a target="_blank" rel="noopener" href="https://fonts.googleapis.com/">fonts host</a>获取字体</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Font Settings</span></span><br><span class="line"><span class="comment"># See: https://theme-next.org/docs/theme-settings/#Fonts-Customization</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Find fonts on Google Fonts (https://www.google.com/fonts)</span></span><br><span class="line"><span class="comment"># All fonts set here will have the following styles:</span></span><br><span class="line"><span class="comment">#   light | light italic | normal | normal italic | bold | bold italic</span></span><br><span class="line"><span class="comment"># Be aware that setting too much fonts will cause site running slowly</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># To avoid space between header and sidebar in scheme Pisces / Gemini, Web Safe fonts are recommended for `global` (and `title`):</span></span><br><span class="line"><span class="comment"># Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span></span><br><span class="line">    <span class="attr">size:</span> </span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for site title (.site-title).</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts (.post-body).</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Noto</span> <span class="string">Serif</span> <span class="string">SC</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Source</span> <span class="string">Code</span> <span class="string">Pro</span></span><br></pre></td></tr></table></figure>

<h2 id="更改字体大小"><a href="#更改字体大小" class="headerlink" title="更改字体大小"></a>更改字体大小</h2><p>问题：hexo next字体大小更改后无效</p>
<p>换完了字体，设置的字体大小明明默认是1em，也就是16px，但正文字体很大，有1.125em，也就是18px。</p>
<p>谷歌了一下，查到除了上方themes\next_config.yml可以配置字体样式和大小，还有一个直接控制字体的文件themes\next\source\css_variables\base.styl</p>
<p>如下就是默认配置，可以看到没什么问题，正文就应该是1em。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Font size</span></span><br><span class="line">$font-size-base           = (hexo-config(&#x27;font.enable&#x27;) and hexo-config(&#x27;font.global.size&#x27;) is a &#x27;unit&#x27;) ? unit(hexo-config(&#x27;font.global.size&#x27;), em) : 1em;</span><br><span class="line">$font-size-smallest       = .75em;</span><br><span class="line">$font-size-smaller        = .8125em;</span><br><span class="line">$font-size-small          = .875em;</span><br><span class="line">$font-size-medium         = 1em;</span><br><span class="line">$font-size-large          = 1.125em;</span><br><span class="line">$font-size-larger         = 1.25em;</span><br><span class="line">$font-size-largest        = 1.5em;</span><br></pre></td></tr></table></figure>

<p>问题定位：既然网页上正文字体的样式是1.125em，直接在themes中查1.125em，发现只有上方代码里的<code>font-size-large</code>是1.125。于是搜索font-size-large，终于被我逮到了，说的就是你themes\next\source\css_common\components\post\post.styl</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="variable">$font</span>-family-posts;</span><br><span class="line">  <span class="attribute">word-wrap</span>();</span><br><span class="line"></span><br><span class="line">  +desktop-large() &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$font</span>-size-large ;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.exturl</span> <span class="selector-class">.fa</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$font</span>-size-small;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">4px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.image-caption</span>, <span class="selector-class">.figure</span> <span class="selector-class">.caption</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="variable">$grey</span>-dark;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">$font</span>-size-small;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">margin</span>: -<span class="number">20px</span> auto <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意5-7行代码，这个文件默认配置的正文字体大小是font-size-large，怪不得正文不是1em，改成font-size-medium就好了。</p>
<h2 id="更改代码块字体"><a href="#更改代码块字体" class="headerlink" title="更改代码块字体"></a>更改代码块字体</h2><p>将themes\next\source\css_variables\base.styl文件中table-font-size改为80%，这样代码块字体就自动调整为正文的80%</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Table</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">border-color</span>             = <span class="variable">$grey</span>-lighter;</span><br><span class="line"><span class="variable">$table</span>-<span class="attribute">font-size</span>                = <span class="variable">$font</span>-size-small;</span><br><span class="line"><span class="variable">$table</span>-cell-<span class="attribute">border-bottom-color</span> = <span class="variable">$grey</span>-lighter;</span><br><span class="line"><span class="variable">$table</span>-row-odd-bg-<span class="attribute">color</span>         = <span class="number">#f9f9f9</span>;</span><br><span class="line"><span class="variable">$table</span>-row-odd-bg-<span class="attribute">color</span>-dark    = <span class="number">#282828</span>;</span><br><span class="line"><span class="variable">$table</span>-row-hover-bg-<span class="attribute">color</span>       = <span class="variable">$whitesmoke</span>;</span><br><span class="line"><span class="variable">$table</span>-row-hover-bg-<span class="attribute">color</span>-dark  = <span class="number">#363636</span>;</span><br></pre></td></tr></table></figure>

<p>参考：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://theme-next.iissnan.com/theme-settings.html#fonts-customization">官方文档-设置字体</a></li>
<li><a target="_blank" rel="noopener" href="https://spartazhc.github.io/2020/06/03/Next%E4%B8%BB%E9%A2%98%E5%AD%97%E4%BD%93%E9%85%8D%E7%BD%AE/">Hexo Next 主题字体相关配置</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/03/17/Java%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/03/17/Java%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">Java输入输出方法总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-03-17 17:00:40" itemprop="dateCreated datePublished" datetime="2021-03-17T17:00:40+08:00">2021-03-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:45:05" itemprop="dateModified" datetime="2021-12-14T19:45:05+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Java输入输出方法总结"><a href="#Java输入输出方法总结" class="headerlink" title="Java输入输出方法总结"></a>Java输入输出方法总结</h1><h2 id="Scanner库"><a href="#Scanner库" class="headerlink" title="Scanner库"></a>Scanner库</h2><p>在做牛客OJ输入输出练习场时的笔记，JDK版本为1.8.0_251，idea为2020.1.2，所写很多是个人理解，敬请指正。下文的代码均在IDEA上运行调试，输入的每行都会有”\n”。并且下面函数，只要scanner对象没有读到值，为空，那么当前函数都会等待输入，不会执行下一句代码。</p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><p>创建Scanner的一个实例，并将System.in传入Scanner类构造器中，这时就算在控制台输入信息，scan对象也不会读取任何东西（通过调试猜想）。</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210316160146.png" alt="20210316160146"></p>
<p>可以看到上图中变量框内buf为””，代表当前scan读入的值为空。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Scanner读入数据可以使用next()和nextLine()函数。</p>
<h3 id="next-函数用法"><a href="#next-函数用法" class="headerlink" title="next()函数用法"></a>next()函数用法</h3><p>next()函数会等待当前的输入，并且读入当前的有效字符  </p>
<ol>
<li>未读到有效字符时，会一直等待读入有效字符，这时，空格和回车是无效字符；  </li>
<li>当读到有效字符时，空格会成为无效字符，空格后的字符不会读入，而回车作为终止符，代表这一行输入结束，next()函数也结束，例如用例2和用例3；</li>
<li>未读到终止符时，一直等待输入。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    System.out.print(<span class="string">&quot;输入的数据为:&quot;</span> + scan.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">注：&quot;[in]:&quot;后的字符为输入，&quot;[out]:&quot;后的字符为输出。</span><br><span class="line">用例1</span><br><span class="line">[in]:hello world</span><br><span class="line">[out]:输入的数据为:hello</span><br><span class="line">---</span><br><span class="line">用例2</span><br><span class="line">[in]:   hello world</span><br><span class="line">[out]:输入的数据为:hello</span><br><span class="line">---</span><br><span class="line">用例3</span><br><span class="line">[in]:</span><br><span class="line"></span><br><span class="line">hello world</span><br><span class="line">[out]:输入的数据为:hello</span><br></pre></td></tr></table></figure>

<h3 id="nextLine-函数用法"><a href="#nextLine-函数用法" class="headerlink" title="nextLine()函数用法"></a>nextLine()函数用法</h3><p>nextLine()函数和next函数基本功能一致，但是nextLine()会将空格作为有效字符读入，回车作为终止符。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    System.out.println(<span class="string">&quot;输入的数据为：&quot;</span> + scan.nextLine());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">用例1</span><br><span class="line">[in]:   hello world</span><br><span class="line">[out]:   hello world</span><br><span class="line"></span><br><span class="line">用例2(这里输入和输出中three space前后都有三个空格，空格作为有效字符)</span><br><span class="line">[in]:   three space   </span><br><span class="line">[out]:   three space   </span><br><span class="line"></span><br><span class="line">用例3(这里输入为回车，输出也为空)</span><br><span class="line">[in]:</span><br><span class="line"></span><br><span class="line">[out]:</span><br></pre></td></tr></table></figure>

<h3 id="hasNext"><a href="#hasNext" class="headerlink" title="hasNext()"></a>hasNext()</h3><p>hasNext()会等待当前输入，和next()函数类似。  </p>
<ol>
<li>但是当hasNext()读到有效字符时，并且输入回车终止符后，hasNext()会返回true；</li>
<li>在未读到有效字符时，和next()一样，空格和回车都是无效字符。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    System.out.println(<span class="string">&quot;输入的数据为：&quot;</span> + scan.hasNext());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到下面的代码，while会一直运行，hasNext()一直等待下一个输入，当有输入有效字符并回车后，hasNext()返回true，循环体内scan.next()读到输入的字符。当输入一个数据并回车后（例如3），scan.next()会读取3，随后hasNext()读到\n，这时\n时无效字符，所以hasNext()等待有效字符的输入，停在判断语句处。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否还有输入</span></span><br><span class="line">        <span class="keyword">while</span>(scan.hasNext()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;输入的数据为：&quot;</span> + scan.next());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="hasNextLine"><a href="#hasNextLine" class="headerlink" title="hasNextLine()"></a>hasNextLine()</h3><p>hasNextLine()会等待当前输入，具体机制是通过正则表达式匹配当前位置及之后的字符。  </p>
<ol>
<li>当匹配到时，例如当前位置为\n，或者当前位置为有效字符，但有效字符后由结束符(\n或\r或\n\r或\r\n)，hasNextLine()会返回true；</li>
<li>当匹配不到时，会返回false。</li>
<li>当匹配到有效字符，但是没有结束符，会一直等待输入结束符</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LINE_SEPARATOR_PATTERN =</span><br><span class="line">                                           <span class="string">&quot;\r\n|[\n\r\u2028\u2029\u0085]&quot;</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String LINE_PATTERN = <span class="string">&quot;.*(&quot;</span>+LINE_SEPARATOR_PATTERN+<span class="string">&quot;)|.+$&quot;</span>;</span><br></pre></td></tr></table></figure>



<h3 id="hasNextInt"><a href="#hasNextInt" class="headerlink" title="hasNextInt()"></a>hasNextInt()</h3><p>这个函数和hasNext()类似，多了判断读到的值是不是int的逻辑，如果当前读到的是空格或者回车，函数不会停止，仍然等待输入有效字符，直到输入数字或非数字，当输入非数字时，hasNextInt返回false，循环结束。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断是否还有输入</span></span><br><span class="line">        <span class="keyword">while</span>(scan.hasNextInt()) &#123;</span><br><span class="line">            <span class="keyword">int</span> number = scan.nextInt();</span><br><span class="line">            System.out.println(<span class="string">&quot;输入的数据为：&quot;</span> + number);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="关于牛客网和IDEA的实验结果不同的原因"><a href="#关于牛客网和IDEA的实验结果不同的原因" class="headerlink" title="关于牛客网和IDEA的实验结果不同的原因"></a>关于牛客网和IDEA的实验结果不同的原因</h2><p>以牛客OJ在线编程常见输入输出练习场中的A题目为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">题目描述：计算a+b</span><br><span class="line"></span><br><span class="line">输入描述：输入包括两个正整数a,b(1 &lt;&#x3D; a, b &lt;&#x3D; 10^9),输入数据包括多组。</span><br><span class="line"></span><br><span class="line">输出描述: 输出a+b的结果</span><br><span class="line"></span><br><span class="line">示例：</span><br><span class="line">输入：</span><br><span class="line">1 5</span><br><span class="line">10 20</span><br><span class="line">输出：</span><br><span class="line">6</span><br><span class="line">30</span><br></pre></td></tr></table></figure>

<h3 id="hasNext-IDEA-A题"><a href="#hasNext-IDEA-A题" class="headerlink" title="hasNext() IDEA A题"></a>hasNext() IDEA A题</h3><p>采用复制粘贴形式，将牛课上用例粘贴到IDEA控制台，用例如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">while</span> (scan.hasNext()) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = scan.nextInt();</span><br><span class="line">            <span class="keyword">int</span> b = scan.nextInt();</span><br><span class="line">            System.out.println(a+b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">用例：</span><br><span class="line"><span class="number">1</span> <span class="number">5</span></span><br><span class="line"><span class="number">10</span> <span class="number">20</span></span><br><span class="line">scan.buf:<span class="string">&quot;1 5\n10 20&quot;</span></span><br></pre></td></tr></table></figure>
<p>可以看到直接粘贴是没有最后的\n，如果自己一行一行敲进去会有\n。</p>
<p>运行到第二次int b时，会等待输入结束符回车，输入回车也就是\n后，buf变为”1 5\n10 20\n”，并且开始继续运行第三次循环你，而这时的hasNext()会一直等待输入，卡在第三次循环判断处。</p>
<h3 id="hasNext-牛客-A题"><a href="#hasNext-牛客-A题" class="headerlink" title="hasNext() 牛客 A题"></a>hasNext() 牛客 A题</h3><p>采用hasNext()，代码和上面IDEA实验的一样</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317153915.png" alt="20210317153915"></p>
<ol>
<li>如下图，采用hasNext()，调试时可以看到scan读到的是”1 5 10 20 “（没有”\n”，在IDEA上自己输入会有”\n”,但是20后面有一个空字符，不清楚是什么）,并且position为0，代表当前要读的字符位置为0，即第一个字符。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317154043.png" alt="20210317154043"></p>
<ol start="2">
<li>如下图，当第一次读完a和b时，已经将1和5读入了scan.nextInt()，这时下一个要读的字符的位置为3，即第四个字符（空格算一个字符）</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317154101.png" alt="20210317154101"></p>
<ol start="3">
<li>如下图，当第二次执行到while的判断语句时，position为3，这时hasNext()可以判定还有字符，返回true，于是进入循环体</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317154321.png" alt="20210317154321"></p>
<ol start="4">
<li>如下图，当第二次读完a后，position变为6，是10后面那个空格的位置，即第七个字符，当然下一次读20时，空格会省去，这是next()的特点，可以看后文next()函数的详细介绍。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317154350.png" alt="20210317154350"></p>
<ol start="5">
<li>如下图，当第二次读完a和b后，position变为9，而9的位置刚好在20后面,这里猜想有两种可能：</li>
</ol>
<p>1）猜想1：牛客网上用例输入系统后，没有回车\n这种符号（IDEA上面有”\n”），<del>于是第三次循环时，hasNext()函数会返回false，也就不会进行第三次循环，而是执行到函数末尾了。</del>那么position为9的数据是什么？如果是空格那hasNext()遇见空格会继续等待输入，也就不是空格；那如果是回车，就变成了猜想2</p>
<p>2）猜想2：牛客网上每一行结尾都有一个\n，但是调式系统没有显示，hasNext()碰到\n时认为没有接收到有效字符，接着往后面读，进而读到了后面一行的数字；当整个用例文件被读完的时候，按照hasNext()函数的特点，会一直等待继续输入，但是因为文件被读完，可能发出了文件结束的信号，从而程序运行结束。</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317154513.png" alt="20210317154513"></p>
<p>因此更相信猜想2，于是得出以下结论：</p>
<p>结论：hasNext()运行一次，在未读到有效字符时，空格和回车都是无效字符；在读到了有效字符后，读到\n就执行完了当前这句代码，没有读到\n的话，会一直等待输入，知道输入终止符\n，hasNext()才会停止。牛客网上用例中，可能每一行结尾都有一个\n，而牛客网上的next和nextLine类函数可以停止等待输入，可能是文件读取结束发出信号所致（猜想）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">这个代码框内为最开始的想法，现在看来有误，只是保留在此</span><br><span class="line"></span><br><span class="line">这个写在最前面，防止掉入陷阱。牛客网的判题系统的所有测试用例都保存在文件中，而文件中每一行末尾没有&quot;\n&quot;，自己在IDEA的控制台输入时，会读到&quot;\n&quot;，这就导致了在循环或者判断时，hasNext()和hasNextLine()在不同平台上结果会有差异。(可以自己在牛客和IDEA调试一下，看看scan对象的buf变量就知道了)</span><br><span class="line"></span><br><span class="line">hasNext()对于没有\n的一行，判false </span><br><span class="line"></span><br><span class="line">hasNextLine()对于没有\n的一行，判true （假定牛课上每一行结尾没有\n，那么无论有没有\n都会判true）（如果牛客上每一行结尾都有\n的话，那么hasNextLine()是判true，从而进循环体报错，没有\n会等待输入结束符。）</span><br><span class="line"></span><br><span class="line">hasNext()对于有\n的一行，判true，无限循环</span><br><span class="line"></span><br><span class="line">hasNextLine()对于有\n的一行，判true，无限循环</span><br></pre></td></tr></table></figure>

<h3 id="hasNextLine-IDEA-A题"><a href="#hasNextLine-IDEA-A题" class="headerlink" title="hasNextLine() IDEA A题"></a>hasNextLine() IDEA A题</h3><p>现在，在IDEA上测试下hasNextLine()，代码和用例如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (scan.hasNextLine()) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = scan.nextInt();</span><br><span class="line">            <span class="keyword">int</span> b = scan.nextInt();</span><br><span class="line">            System.out.println(a+b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">用例：</span><br><span class="line"><span class="number">1</span> <span class="number">5</span></span><br><span class="line"><span class="number">10</span> <span class="number">20</span></span><br><span class="line">scan.buf:<span class="string">&quot;1 5\n10 20&quot;</span></span><br></pre></td></tr></table></figure>

<p>用例直接粘贴到控制台内，可以看到buf中为”1 5\n10 20”</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317161319.png" alt="20210317161319"></p>
<p>当第一次读完a和b时，position变为3，指向第一个\n</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317161915.png" alt="20210317161915"></p>
<p>当第二次运行完while的判断语句后，可以看到position仍未3，但是hasNextPattren匹配到了后面还有信息</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317161945.png" alt="20210317161945"></p>
<p>当执行到第二次b的读入时，程序卡住了，等待输入，这时输入回车，就可以继续读入b的值</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317162349.png" alt="20210317162349"></p>
<p>敲入回车后，看到position为9，buf也变为”1 5\n10 20\n”，这时9指向”\n”</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317162540.png" alt="20210317162540"></p>
<p>在继续执行后，hasNextLine()仍然判断到后面有信息，进入循环体内。</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317162730.png" alt="20210317162730"></p>
<p>这时执行到a的读入，nextInt()开始等待输入，程序变得无法结束</p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317162841.png" alt="20210317162841"></p>
<h3 id="hasNextLine-牛客-A题"><a href="#hasNextLine-牛客-A题" class="headerlink" title="hasNextLine() 牛客 A题"></a>hasNextLine() 牛客 A题</h3><p>现在，再使用hasNextLine()调试一下，代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (scan.hasNextLine()) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = scan.nextInt();</span><br><span class="line">            <span class="keyword">int</span> b = scan.nextInt();</span><br><span class="line">            System.out.println(a+b);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>如下图，当即将执行到while的判断语句hasNextLine()时，scan并没有读取到任何东西，当执行hasNextLine()后，才会读取输入，并判断是否有一行数据</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210316200122.png" alt="20210316200122"></p>
<ol start="2">
<li>如下图，当执行完hasNextLine()后，进入循环体，还未执行a这行代码。可以看到buf是”1 5 10 20 “，hasNextLine()以此判断有数据，返回true，才进入了循环体。</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210316200302.png" alt="20210316200302"></p>
<ol start="3">
<li>如下图，当即将执行到while的判断语句hasNextLine()时，position为9，已经指向空了，但是hasNextLine()在这里会返回true，判断机制还没有搞清楚，因此当执行到循环体第一句时，就会报错Exception occurred: java.util.NoSuchElementException (uncaught)Signal Dispatcher:</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210316210955.png" alt="20210316210955"></p>
<ol start="4">
<li><p>由此猜想牛客对用例的输入可能采取了某些方法，当然在只有牛客用例的时候，无法进行控制台输入，也就和上面IDEA的结果不同，IDEA是阻塞等待输入，而牛客这里直接报错。</p>
</li>
<li><p>当我们采用nextLine()，代码如下，读取这一行，相当于跳过当前行，这样下一次while判断时，hasNextLine()就不会返回true了，成功解决A题目。<del>但是仅仅是输入行中没有”\n”时才可以用nextLine()来辅助hasNextLine()，当有”\n”时hasNextLine()永远返回true，无法跳出循环。</del></p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> (scan.hasNextLine()) &#123;</span><br><span class="line">            <span class="keyword">int</span> a = scan.nextInt();</span><br><span class="line">            <span class="keyword">int</span> b = scan.nextInt();</span><br><span class="line">            System.out.println(a+b);</span><br><span class="line">            scan.nextLine();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>看一下nextLine改变了什么，当执行nextLine之前，position为3，就是数字5后面的字符</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317163748.png" alt="20210317163748"></p>
<ol start="2">
<li>当执行nextLine后，position为4，猜想当hasNextLine()遇见position为3的”\n”时，会返回true，而遇见position为4的”1”时，继续判断这一句，发现后面有”\n”，匹配成功，返回true。（假设牛客上的用例，每句末尾都有\n）</li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317163918.png" alt="20210317163918"></p>
<ol start="3">
<li>但是，当运行到第二次循环时，nextLine()将position变为10，见下面两张图，hasNextLine()在第三次判断时，没有\n字符了，甚至什么也没有，也就返回false，程序结束。<br><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317164208.png" alt="20210317164208"></li>
</ol>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20210317164221.png" alt="20210317164221"></p>
<h3 id="hasNextLine-IDEA-G题"><a href="#hasNextLine-IDEA-G题" class="headerlink" title="hasNextLine() IDEA G题"></a>hasNextLine() IDEA G题</h3><p>再看一个hasNextLine()的实验，在IDEA上实验题目G，输入用例1，发现结尾没有\n，hasNextLine()会等待输入，知道等到\n，当输入\n后，这个\n前面的这行0都被读入，但是接下来hasNextLine()仍然会等待\n，从而陷入无限循环；当输入用例2时，IDEA会正常通过三行hasNextLine()，到达第四次循环并等待输入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">G</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (scan.hasNextLine()) &#123; <span class="comment">//当前代码可以在牛客上通过</span></span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">            String s = scan.nextLine();</span><br><span class="line">            Scanner rowIn = <span class="keyword">new</span> Scanner(s);</span><br><span class="line">            <span class="keyword">while</span> (rowIn.hasNextInt()) &#123;</span><br><span class="line">                result += rowIn.nextInt();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用例1：</span><br><span class="line">1 2 3</span><br><span class="line">4 5</span><br><span class="line">0 0 0 0 0</span><br><span class="line">用例1在IDEA中变量显示:&quot;1 2 3\n4 5\n0 0 0 0 0&quot;</span><br><span class="line">用例1在牛客中变量显示:&quot;1 2 34 50 0 0 0 0&quot;</span><br><span class="line">----</span><br><span class="line">用例2:</span><br><span class="line">1 2 3</span><br><span class="line">4 5</span><br><span class="line">0 0 0 0 0</span><br><span class="line"></span><br><span class="line">用例2在IDEA中变量显示:&quot;1 2 3\n4 5\n0 0 0 0 0\n&quot;</span><br></pre></td></tr></table></figure>

<h3 id="hasNextLine-牛客-G题"><a href="#hasNextLine-牛客-G题" class="headerlink" title="hasNextLine() 牛客 G题"></a>hasNextLine() 牛客 G题</h3><p>代码正常运行，因为有一句nextLine()，因此程序正常结束</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">G</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner scan = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (scan.hasNextLine()) &#123; <span class="comment">//当前代码可以在牛客上通过</span></span><br><span class="line">            <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">            String s = scan.nextLine();</span><br><span class="line">            Scanner rowIn = <span class="keyword">new</span> Scanner(s);</span><br><span class="line">            <span class="keyword">while</span> (rowIn.hasNextInt()) &#123;</span><br><span class="line">                result += rowIn.nextInt();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>综上，在使用Scanner进行输入输出时，尽量避免使用hasNextLine()。以下参考在查阅资料时给了很大启发，附在下面。（但是有些函数在牛客可以结束，但是在IDEA就无线等待输入还是没搞清楚）</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.nowcoder.com/discuss/8050">https://www.nowcoder.com/discuss/8050</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_36242811/article/details/105463062">https://blog.csdn.net/weixin_36242811/article/details/105463062</a></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/02/02/conda%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0%E5%8C%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/02/conda%E5%AE%89%E8%A3%85%E6%9C%AC%E5%9C%B0%E5%8C%85/" class="post-title-link" itemprop="url">Conda 安装本地包</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 23:45:20" itemprop="dateCreated datePublished" datetime="2021-02-02T23:45:20+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:44:01" itemprop="dateModified" datetime="2021-12-14T19:44:01+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Conda安装本地包"><a href="#Conda安装本地包" class="headerlink" title="Conda安装本地包"></a>Conda安装本地包</h1><p>在下载包时，因为网络问题，无法下载，报告以下代码的错误，可以看到是网络连接错误，提示重试，如果一直无法稳定的下载好这个包的时候，可以通过其他工具下载以下网址的包。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CondaError: CondaHTTPError: HTTP 000 CONNECTION FAILED for url &lt;https:&#x2F;&#x2F;conda.anaconda.org&#x2F;menpo&#x2F;linux-64&#x2F;boost-1.59.0-py27_0.tar.bz2&gt;</span><br><span class="line">Elapsed: -</span><br><span class="line"></span><br><span class="line">An HTTP error occurred when trying to retrieve this URL.</span><br><span class="line">HTTP errors are often intermittent, and a simple retry will get you on your way.</span><br></pre></td></tr></table></figure>

<p>以上面报错中的boost为例，我们可以使用迅雷下载上面错误中得到的这个地址:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;conda.anaconda.org&#x2F;menpo&#x2F;linux-64&#x2F;boost-1.59.0-py27_0.tar.bz2  </span><br></pre></td></tr></table></figure>

<p>之后在这个包存放的目录下，切换到自己的环境中，使用以下命令安装本地包：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install --use-local  boost-1.59.0-py27_0.tar.bz2</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/02/02/conda%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/02/conda%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">conda使用总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-02 18:22:52" itemprop="dateCreated datePublished" datetime="2021-02-02T18:22:52+08:00">2021-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:44:15" itemprop="dateModified" datetime="2021-12-14T19:44:15+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="清华源"><a href="#清华源" class="headerlink" title="清华源"></a>清华源</h2><p>官网：<a target="_blank" rel="noopener" href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/">https://mirror.tuna.tsinghua.edu.cn/help/anaconda/</a></p>
<p>Ubuntu系统可以使用如下命令修改用户目录下的 .condarc 文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit ~/.condarc</span><br></pre></td></tr></table></figure>

<p>将如下命令添加到文件中即可</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">channels:</span><br><span class="line">  - defaults</span><br><span class="line">show_channel_urls: true</span><br><span class="line">channel_alias: https://mirrors.tuna.tsinghua.edu.cn/anaconda</span><br><span class="line">default_channels:</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro</span><br><span class="line">  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span><br><span class="line">custom_channels:</span><br><span class="line">  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br><span class="line">  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span><br></pre></td></tr></table></figure>

<p>运行 conda clean -i 清除索引缓存，保证用的是镜像站提供的索引。</p>
<p>运行 conda create -n myenv numpy 测试一下吧。</p>
<h2 id="创建环境"><a href="#创建环境" class="headerlink" title="创建环境"></a>创建环境</h2><p>创建一个名为envirment_name的虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda create -n envirment_name</span><br></pre></td></tr></table></figure>

<h2 id="激活环境"><a href="#激活环境" class="headerlink" title="激活环境"></a>激活环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate envirment_name</span><br></pre></td></tr></table></figure>

<h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><p>安装3.6版本的python</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install python==3.6</span><br></pre></td></tr></table></figure>

<h2 id="删除包"><a href="#删除包" class="headerlink" title="删除包"></a>删除包</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda uninstall python</span><br></pre></td></tr></table></figure>

<h2 id="删除环境"><a href="#删除环境" class="headerlink" title="删除环境"></a>删除环境</h2><p>删除envirment_name这个环境的所有内容，-n指定环境名，–all代表删除全部内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda remove -n envirment_name --all</span><br></pre></td></tr></table></figure>

<h2 id="使用yml创建环境"><a href="#使用yml创建环境" class="headerlink" title="使用yml创建环境"></a>使用yml创建环境</h2><p>conda可以通过config文件指定包的版本来创建环境，例如使用如下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda env create --file environment.yml</span><br></pre></td></tr></table></figure>

<p>其中environment.yml文件中的信息如下</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">envirment_name</span></span><br><span class="line"><span class="attr">channels:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">defaults</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">conda-forge</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">pytorch</span></span><br><span class="line"><span class="attr">dependencies:</span>         <span class="comment"># everything under this, installed by conda</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">python=3.6</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">pip</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">pytorch=1.2.0</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">torchvision=0.4.0</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">cudatoolkit=10.0</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">pip:</span>                <span class="comment"># everything under this, installed by pip</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">open3d==0.8.0</span></span><br></pre></td></tr></table></figure>

<h2 id="清理conda无用的包和缓存"><a href="#清理conda无用的包和缓存" class="headerlink" title="清理conda无用的包和缓存"></a>清理conda无用的包和缓存</h2><p>cache目录在/home/username/.conda/pkgs。可以使用-p来删除没有用到的包，想删除干净点就用-y –all来删除所有下载的包和缓存。想看更多选项可以-h看帮助文档。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda clean -p      //删除没有用的包</span><br><span class="line">conda clean -y -all //删除所有的安装包及cache</span><br><span class="line">conda clean -i      //删除索引缓存</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/26/Virtual%20Multi-view%20Fusion%20for%203D%20Semantic%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/26/Virtual%20Multi-view%20Fusion%20for%203D%20Semantic%E8%AE%BA%E6%96%87%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Virtual Multi-view Fusion for 3D Semantic论文笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-26 17:13:34" itemprop="dateCreated datePublished" datetime="2020-11-26T17:13:34+08:00">2020-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:47:42" itemprop="dateModified" datetime="2021-12-14T19:47:42+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Virtual-Multi-view-Fusion-for-3D-Semantic-Segmentation"><a href="#Virtual-Multi-view-Fusion-for-3D-Semantic-Segmentation" class="headerlink" title="Virtual Multi-view Fusion for 3D Semantic Segmentation"></a>Virtual Multi-view Fusion for 3D Semantic Segmentation</h1><p>论文：<a target="_blank" rel="noopener" href="https://arxiv.org/abs/2007.13138">https://arxiv.org/abs/2007.13138</a><br>会议：ECCV 2020</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文在点云分割领域对多视图方法进行了研究，提出了虚拟视图的概念，避免了真实相机的局限性，提出了新的多视图方法，在scannet和s3dis上效果较<strong>多视图</strong>方法有很大的提升，但是没看到论文中对具体分割方法的介绍，可能没用到3d分割网络？该文章的代码还没有公开。</p>
<h2 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h2><p>体素方法缺点：<br>用于3D语义分割的最新技术（SOTA）方法使用3D稀疏体素卷积运算符来处理输入数据。例如，MinkowskiNet和SparseConvNet 各自将输入数据加载到稀疏3D体素网格中，并使用稀疏3D卷积提取特征。这些“placecentric”的方法旨在识别3D模式，因此对于具有独特3D形状的对象类型（例如椅子）效果很好，而对其他对象（例如墙面图片）效果不佳。它们还占用了大量内存，这限制了空间分辨率和/或批处理大小。</p>
<p>多视图方法缺点:<br>当可获得posed RGB-D图像时，尝试使用为处理摄影RGB图像而设计的2D网络预测密集的特征和/或语义标签，然后将它们聚集在可见的3D表面上，或者将特征投影到可见的表面上，并在3D中将它们进一步卷积。<br>尽管这些“view-centric”的方法利用了在大型RGB图像数据集上进行预训练的大规模图像处理网络，但由于在RGB-D扫描数据集中存在遮挡，光照变化和相机姿态未对准的困难，因此无法在标准3D分割基准上达到SOTA性能。在ScanNet基准测试的3D语义标签挑战赛中，基于视图的方法目前不在当前排行榜的上半部分。</p>
<h2 id="贡献"><a href="#贡献" class="headerlink" title="贡献"></a>贡献</h2><p>本文提出了一种新的基于视图的3D语义分割方法，该方法克服了先前方法的问题。<strong>关键思想是使用从3D场景的“虚拟视图”渲染的合成图像，而不是将处理限制为由物理相机获取的原始摄影图像。</strong><br>这种方法有几个优点，可以解决以前以视图为中心的方法遇到的关键问题。</p>
<ol>
<li>我们可以对非自然视场的虚拟视图选择camera intrinsics，以增加在每个渲染图像中观察到的上下文。</li>
<li>我们在与场景表面的距离/角度变化较小、物体之间遮挡相对较少、表面覆盖冗余较大的位置选择虚拟视点。</li>
<li>我们渲染非真实的图像，没有依赖于视图的光照效果和背对表面的遮挡——也就是说，虚拟视图可以从墙壁、地板和天花板后面看到一个场景，以提供相对大的背景和小的遮挡。</li>
<li>我们根据已知的虚拟视图的摄像机参数将像素预测聚合到三维表面上，这样就不会在咬合轮廓上遇到语义标签的“溢出”。</li>
<li>在训练和推理过程中的虚拟视图可以模拟多尺度的训练和测试，避免二维cnn的尺度内方差问题。在培训和测试期间，我们可以生成任意数量的虚拟视图。在训练期间，由于数据的增加，更多的虚拟视图提供了健壮性。在测试期间，由于投票冗余，更多的视图提供了健壮性。</li>
<li>我们的多视点融合方法中的二维分割模型可以受益于大型图像预处理数据，如ImageNet和COCO，这些数据对于纯三维卷积方法是不可用的。</li>
</ol>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><h3 id="总体流程"><a href="#总体流程" class="headerlink" title="总体流程"></a>总体流程</h3><p>Training stage.<br>在训练阶段，首先为每个3D场景选择虚拟视图，然后为每个虚拟视图选择摄影机内在，摄影机外部，要渲染的通道以及渲染参数（例如，深度范围，背面剔除）.<br>然后，通过为所选通道和groudtruth语义标签渲染所选虚拟视图来生成训练数据。<br>使用渲染的训练数据训练2D语义分割模型，并在推理阶段使用该模型。<br>Inference stage.<br>在推理阶段，使用与训练阶段类似的方法来选择并渲染虚拟视图，但是没有groudtruth语义标签。<br>使用训练好的模型在渲染的虚拟视图上进行2D语义分割，将2D语义特征投影到3D，然后通过融合多个投影的2D语义特征来导出3D中的语义类别。  </p>
<h3 id="虚拟视图选择"><a href="#虚拟视图选择" class="headerlink" title="虚拟视图选择"></a>虚拟视图选择</h3><h4 id="Camera-intrinsics"><a href="#Camera-intrinsics" class="headerlink" title="Camera intrinsics."></a>Camera intrinsics.</h4><p>使用针孔摄像机模型，提高了FOV，得到的二维图像更大，提供了更大的上下文信息。</p>
<h4 id="Camera-extrinsics"><a href="#Camera-extrinsics" class="headerlink" title="Camera extrinsics."></a>Camera extrinsics.</h4><p>使用以下四种策略选择相机外参</p>
<ul>
<li>均匀采样:<br>均匀采样相机外部，以生成许多新颖的视图，而与3D场景的特定结构无关。<br>具体，使用3D场景顶部均匀采样位置的自顶向下视图，以及从场景中心看去但均匀采样位置的视图。</li>
<li>尺度不变采样：<br>由于2D卷积神经网络通常不是尺度不变的，因此如果视图的尺度与3D场景不匹配，则模型性能可能会受到影响。<br>为了克服此限制，针对3D场景中的片段以一定比例尺对视图进行采样。<br>具体来说，对3D场景进行了过度分割，对于每个片段，都将相机定位为通过沿法线方向拉回到一定范围的距离来观看片段。<br>进行深度检查以避免前景物体的遮挡。如果在渲染阶段禁用了背面剔除，将进行光线跟踪并删除被背面遮挡的所有视图。<br>3D场景的过度分割是不受监督的，并且不使用地面真实语义标签，因此尺度不变采样可以应用于训练和推理阶段。</li>
<li>类平衡采样：<br>类平衡已被广泛用作2D语义分段的数据增强方法。<br>通过选择查看代表性不足的语义类别的网格段的视图来进行类平衡，类似于尺度不变采样方法。<br>注意，这种采样方法仅适用于ground truth语义标签可用的训练阶段。</li>
<li>Original views sampling：<br>从原始摄影机视图中进行采样，因为它们代表了人工如何在具有实际物理约束的真实3D场景中选择摄影机视图。<br>此外，3D场景是从原始视图重建的，因此包含它们可以确保覆盖拐角情况，否则这些情况很难作为随机虚拟视图。<h4 id="Channels-for-rendering"><a href="#Channels-for-rendering" class="headerlink" title="Channels for rendering."></a>Channels for rendering.</h4>渲染了以下通道:RGB color、normal、规范化全局XYZ坐标。额外的通道允许我们超越现有RGB-D传感器的限制。图5显示了虚拟视图渲染的通道。<br><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126164253.png" alt="20201126164253"><h4 id="Rendering-parameters"><a href="#Rendering-parameters" class="headerlink" title="Rendering parameters."></a>Rendering parameters.</h4>在渲染视图时可打开背景剔除，这样相机视图不会被遮挡，例如一个场景中，我们既可以选择外部视图，也可以选择内部视图。如图6所示。<br><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126164535.png" alt="20201126164535"><h4 id="Training-vs-inference-stage"><a href="#Training-vs-inference-stage" class="headerlink" title="Training vs. inference stage."></a>Training vs. inference stage.</h4>我们希望在训练和推理阶段使用类似的视图选择方法，以避免产生领域差距。虽然推理成本在现实世界的应用中可能很重要，但在本文中，考虑离线3D分割任务且不在任何一个阶段优化计算成本，所以论文在任何一个阶段使用任意多的虚拟视图。</li>
</ul>
<h3 id="Multiview-Fusion"><a href="#Multiview-Fusion" class="headerlink" title="Multiview Fusion"></a>Multiview Fusion</h3><h4 id="2D-semantic-segmentation-model"><a href="#2D-semantic-segmentation-model" class="headerlink" title="2D semantic segmentation model"></a>2D semantic segmentation model</h4><p>用渲染的虚拟视图作为训练数据，训练一个2D语义分割模型。使用xception 65特征提取器和DeeplabV3+ 解码器。<br>从在ImageNet上训练的预先训练的分类模型检查点初始化模型。当使用附加输入通道(如正常图像和坐标图像)训练模型时，通过将权重平铺在附加通道上并在每个空间位置对其进行归一化来修改预训练检查点的第一层，使得沿着通道维度的权重总和保持不变。</p>
<h4 id="3D-fusion-of-2D-semantic-features"><a href="#3D-fusion-of-2D-semantic-features" class="headerlink" title="3D fusion of 2D semantic features"></a>3D fusion of 2D semantic features</h4><p>在推理过程中，在虚拟视图上运行2D语义分割模型，并获得图像特征(例如，每个像素的一元概率)。为了将2D图像特征投影到3D，使用以下方法:</p>
<ol>
<li>在虚拟视图上渲染深度通道；</li>
<li>对于每个3D点，将其投影回每个虚拟视图，并且仅当像素的深度与点到相机的距离匹配时，才累积投影像素的图像特征。</li>
<li>与从每个像素投射光线以找到要聚集的3D点的替代方法相比，该方法实现了更好的计算效率。</li>
<li>首先，场景中3D点的数量远小于场景的所有渲染图像中的像素总数。</li>
<li>其次，使用深度检查投影3D点比涉及光线投射的操作更快。<br><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170300.png" alt="20201126170300"><br><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170319.png" alt="20201126170319"></li>
</ol>
<h2 id="Experiments"><a href="#Experiments" class="headerlink" title="Experiments"></a>Experiments</h2><h3 id="Scannet"><a href="#Scannet" class="headerlink" title="Scannet"></a>Scannet</h3><p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170347.png" alt="20201126170347"></p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170642.png" alt="20201126170642"></p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170359.png" alt="20201126170359"></p>
<h3 id="S3DIS"><a href="#S3DIS" class="headerlink" title="S3DIS"></a>S3DIS</h3><p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170415.png" alt="20201126170415"></p>
<p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170447.png" alt="20201126170447"></p>
<h3 id="Effect-of-Training-Set-Size-and-number-of-views-at-Inference"><a href="#Effect-of-Training-Set-Size-and-number-of-views-at-Inference" class="headerlink" title="Effect of Training Set Size and number of views at Inference"></a>Effect of Training Set Size and number of views at Inference</h3><p><img src="https://raw.githubusercontent.com/Marshzero/PicBed/master/images/20201126170832.png" alt="20201126170832"></p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>本文提出了一种虚拟多视角融合的纹理meshes三维语义分割方法。这种方法引入了几个显著提高标签性能的新思想:带有附加通道的虚拟视图、背面剔除、宽视野、多尺度感知视图采样。因此，它克服了困扰大多数以前多视角融合方法的2D-3D错位、遮挡、窄视角和尺度不变性问题。<br>本文得出的令人惊讶的结论是，多视图融合算法是3D纹理网格语义分割的3D卷积的可行替代方案。虽然这项任务的早期工作考虑了多视图融合，但近年来，通用方法已被放弃，取而代之的是点云的3D卷积和稀疏体素网格。本文表明，仔细选择和渲染虚拟视图的简单方法使得多视图融合能够优于几乎所有最近的3D卷积网络。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/23/AttributeError%20module%20os%20has%20no%20attribute%20path/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/23/AttributeError%20module%20os%20has%20no%20attribute%20path/" class="post-title-link" itemprop="url">AttributeError module os has no attribute path</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-23 22:32:04" itemprop="dateCreated datePublished" datetime="2020-11-23T22:32:04+08:00">2020-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 20:08:45" itemprop="dateModified" datetime="2021-12-14T20:08:45+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>写代码时报错：AttributeError: module ‘os’ has no attribute ‘path’</p>
<p>发现是文件名命名为了os，与模块名相同，改成其他名字就好了</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/fde0096c31f3">https://www.jianshu.com/p/fde0096c31f3</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/23/bash+jupyter%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/23/bash+jupyter%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">bash+jupyter中文乱码问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-23 17:07:09" itemprop="dateCreated datePublished" datetime="2020-11-23T17:07:09+08:00">2020-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:43:48" itemprop="dateModified" datetime="2021-12-14T19:43:48+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="bash中文乱码"><a href="#bash中文乱码" class="headerlink" title="bash中文乱码"></a>bash中文乱码</h2><p>将编码调为utf8</p>
<h2 id="jupyter在bash界面中文乱码"><a href="#jupyter在bash界面中文乱码" class="headerlink" title="jupyter在bash界面中文乱码"></a>jupyter在bash界面中文乱码</h2><p>将编码调为GBK</p>
<h2 id="上面两个矛盾，还没发现解决方法"><a href="#上面两个矛盾，还没发现解决方法" class="headerlink" title="上面两个矛盾，还没发现解决方法"></a>上面两个矛盾，还没发现解决方法</h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/23/python%20os.parh%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/23/python%20os.parh%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">python os.path模块</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-23 16:59:30" itemprop="dateCreated datePublished" datetime="2020-11-23T16:59:30+08:00">2020-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:46:01" itemprop="dateModified" datetime="2021-12-14T19:46:01+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python-os-path用法"><a href="#python-os-path用法" class="headerlink" title="python os.path用法"></a>python os.path用法</h1><h2 id="导入方法"><a href="#导入方法" class="headerlink" title="导入方法"></a>导入方法</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br></pre></td></tr></table></figure>
<h2 id="os-path-dirname"><a href="#os-path-dirname" class="headerlink" title="os.path.dirname"></a>os.path.dirname</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.path.dirname 返回文件路径，不包括文件名</span></span><br><span class="line">file1_dir = os.path.dirname(<span class="string">&quot;D:\\6_code\pycharm\download.py&quot;</span>)</span><br><span class="line">file2_dir = os.path.dirname(<span class="string">&quot;D:\\6_code\\pycharm\\download.py&quot;</span>)</span><br><span class="line">file3_dir = os.path.dirname(<span class="string">&quot;D:/6_code/pycharm/download.py&quot;</span>)</span><br><span class="line">file4_dir = os.path.dirname(<span class="string">&quot;D://6_code//pycharm//download.py&quot;</span>)</span><br><span class="line">print(file1_dir)</span><br><span class="line">print(file2_dir)</span><br><span class="line">print(file3_dir)</span><br><span class="line">print(file4_dir)</span><br></pre></td></tr></table></figure>
<pre><code>out:
D:\6_code\pycharm
D:\6_code\pycharm
D:/6_code/pycharm
D://6_code//pycharm</code></pre>
<h2 id="os-path-dirname-file"><a href="#os-path-dirname-file" class="headerlink" title="os.path.dirname(file)"></a>os.path.dirname(<strong>file</strong>)</h2><p>os.path.dirname(<strong>file</strong>)返回脚本的路径，但是需要注意一下几点:</p>
<p>1、必须是实际存在的.py文件，如果在命令行执行，则会引发异常NameError: name ‘<strong>file</strong>‘ is not defined</p>
<p>2、在运行的时候如果输入完整的执行的路径，则返回.py文件的全路径如：</p>
<p>python c:/test/test.py 则返回路径 c:/test ，如果是python test.py 则返回空</p>
<p>3、结合os.path.abspath用，效果会好，如果大家看过一些python架构的代码的话，会发现经常有这样的组合</p>
<p>os.path.dirname(os.path.abspath(<strong>file</strong>)),os.path.abspath(<strong>file</strong>)返回的是.py文件的绝对路径</p>
<p>这就是os.path.dirname(<strong>file</strong>)的用法，其主要总结起来有:<br>1、不要已命令行的形式来进行os.path.dirname(<strong>file</strong>)这种形式来使用这个函数</p>
<p>2、结合os.path.abspath()使用</p>
<h2 id="os-path-abspath"><a href="#os-path-abspath" class="headerlink" title="os.path.abspath"></a>os.path.abspath</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.path.abspath 返回绝对路径</span></span><br><span class="line">abs_dir = os.path.abspath(os.path.dirname(<span class="string">&quot;D://6_code//pycharm/download.py&quot;</span>))</span><br><span class="line">print(abs_dir)</span><br><span class="line">abs2_dir = os.path.abspath(<span class="string">&quot;D://6_code//pycharm/download.py&quot;</span>)</span><br><span class="line">print(abs2_dir)</span><br></pre></td></tr></table></figure>
<pre><code>out:
D:\6_code\pycharm
D:\6_code\pycharm\download.py</code></pre>
<h2 id="返回上一层目录"><a href="#返回上一层目录" class="headerlink" title="返回上一层目录"></a>返回上一层目录</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在路径后加上&#x27;/..’相当于返回上一层目录</span></span><br><span class="line">test = os.path.dirname(<span class="string">&quot;D://6_code//pycharm/download-scannet.py&quot;</span>) + <span class="string">&#x27;/..&#x27;</span></span><br><span class="line">test1 = os.path.abspath(os.path.dirname(<span class="string">&quot;D://6_code//pycharm/download-scannet.py&quot;</span>) + <span class="string">&#x27;/..&#x27;</span>)</span><br><span class="line">print(test)</span><br><span class="line">print(test1)</span><br></pre></td></tr></table></figure>
<pre><code>out:
D://6_code//pycharm/..
D:\6_code</code></pre>
<h2 id="os-path-split"><a href="#os-path-split" class="headerlink" title="os.path.split"></a>os.path.split</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.path.split将路径和文件分开</span></span><br><span class="line">file_split = osp.split(<span class="string">&#x27;D://6_code//pycharm/download-scannet.py&#x27;</span>)</span><br><span class="line">print(file_split)</span><br><span class="line"><span class="comment"># os.path.splitext将文件及路径和扩展名分开</span></span><br><span class="line">file_splitext = osp.splitext(<span class="string">&#x27;D://6_code//pycharm/download-scannet.py&#x27;</span>)</span><br><span class="line">print(file_splitext)</span><br></pre></td></tr></table></figure>
<pre><code>out:
(&#39;D://6_code//pycharm&#39;, &#39;download-scannet.py&#39;)
(&#39;D://6_code//pycharm/download-scannet&#39;, &#39;.py&#39;)</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/23/python%20glob%E6%A8%A1%E5%9D%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/23/python%20glob%E6%A8%A1%E5%9D%97/" class="post-title-link" itemprop="url">python glob用法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-23 16:27:15" itemprop="dateCreated datePublished" datetime="2020-11-23T16:27:15+08:00">2020-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:45:57" itemprop="dateModified" datetime="2021-12-14T19:45:57+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="python-glob模块的用法"><a href="#python-glob模块的用法" class="headerlink" title="python glob模块的用法"></a>python glob模块的用法</h1><h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>glob是python自带的一个操作文件的模块。用glob可以查找符合规定的文件路径名，可用以下匹配符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* 匹配0个或多个字符；</span><br><span class="line">** 匹配所有文件,目录，子目录和子目录里面的文件 (3.5版本新增)</span><br><span class="line">? 匹配单个字符；</span><br><span class="line">[] 匹配指定范围内的字符，如：[0-9]匹配数字。</span><br><span class="line">[!] 匹配不在指定范围内的字符</span><br></pre></td></tr></table></figure>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>假设windows中有如下一个目录，其中_config.yml和.gitgnore是文件，其他是文件夹，每个dir文件夹中有一个diri.py文件，例如dir2中有一个dir2.py文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── example</span><br><span class="line">    ├── dir1</span><br><span class="line">    ├── dir2</span><br><span class="line">    ├── dir3</span><br><span class="line">├── train</span><br><span class="line">├── val</span><br><span class="line">├── test</span><br><span class="line">├── _config.yml</span><br><span class="line">└── exp.py</span><br></pre></td></tr></table></figure>
<h3 id="遍历当前目录"><a href="#遍历当前目录" class="headerlink" title="遍历当前目录"></a>遍历当前目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(glob.glob(<span class="string">&#x27;./*&#x27;</span>))</span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">[<span class="string">&#x27;.\\example&#x27;</span>, <span class="string">&#x27;.\\exp.py&#x27;</span>, <span class="string">&#x27;.\\test&#x27;</span>, <span class="string">&#x27;.\\train&#x27;</span>, <span class="string">&#x27;.\\val&#x27;</span>, <span class="string">&#x27;.\\_config.yml&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="遍历上一级目录（在example文件夹中）"><a href="#遍历上一级目录（在example文件夹中）" class="headerlink" title="遍历上一级目录（在example文件夹中）"></a>遍历上一级目录（在example文件夹中）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(glob.glob(<span class="string">&#x27;../*&#x27;</span>))</span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">[<span class="string">&#x27;.\\example&#x27;</span>, <span class="string">&#x27;.\\exp.py&#x27;</span>, <span class="string">&#x27;.\\test&#x27;</span>, <span class="string">&#x27;.\\train&#x27;</span>, <span class="string">&#x27;.\\val&#x27;</span>, <span class="string">&#x27;.\\_config.yml&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="遍历本级下文件"><a href="#遍历本级下文件" class="headerlink" title="遍历本级下文件"></a>遍历本级下文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(glob.glob(<span class="string">&#x27;./*.*&#x27;</span>)) <span class="comment">#本级下所有文件</span></span><br><span class="line">print(glob.glob(<span class="string">&quot;./*.yml&quot;</span>)) <span class="comment">#本级下所有yml文件</span></span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">[<span class="string">&#x27;.\\exp.py&#x27;</span>, <span class="string">&#x27;.\\_config.yml&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;.\\_config.yml&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="匹配特定文件目录"><a href="#匹配特定文件目录" class="headerlink" title="匹配特定文件目录"></a>匹配特定文件目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(glob.glob(<span class="string">&quot;./*[ca][nf]*&quot;</span>)) <span class="comment"># 匹配ca和nf字母组合但一定相邻的名字</span></span><br><span class="line">print(glob.glob(<span class="string">&quot;./*[ca]*[nf]*&quot;</span>)) <span class="comment"># 匹配有ca和nf中任意字母组合的名字</span></span><br><span class="line">print(glob.glob(<span class="string">&quot;./*e?p*&quot;</span>)) <span class="comment"># 匹配e和p中间只有一个字符的名字</span></span><br><span class="line">out:</span><br><span class="line">[]</span><br><span class="line">[<span class="string">&#x27;.\\train&#x27;</span>, <span class="string">&#x27;.\\_config.yml&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;.\\exp.py&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h3 id="匹配子目录及文件"><a href="#匹配子目录及文件" class="headerlink" title="匹配子目录及文件"></a>匹配子目录及文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(glob.glob(<span class="string">&quot;./example/*&quot;</span>)) <span class="comment"># 遍历example文件夹中所有内容</span></span><br><span class="line">print(glob.glob(<span class="string">&quot;./example/*/*&quot;</span>)) <span class="comment"># 遍历example文件夹中所有子文件夹及子文件夹中的文件</span></span><br><span class="line"></span><br><span class="line">out:</span><br><span class="line">[<span class="string">&#x27;./example\\dir1&#x27;</span>, <span class="string">&#x27;./example\\dir2&#x27;</span>, <span class="string">&#x27;./example\\dir3&#x27;</span>]</span><br><span class="line">[<span class="string">&#x27;./example\\dir1\\dir1.py&#x27;</span>, <span class="string">&#x27;./example\\dir2\\dir2.py&#x27;</span>, <span class="string">&#x27;./example\\dir3\\dir3.py&#x27;</span>]</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/23/python%E5%8A%A0%E4%B8%8A%E6%B3%A8%E9%87%8A%E8%BF%98%E6%98%AF%E4%B8%AD%E6%96%87%E6%8A%A5%E9%94%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Yang Zeyu">
      <meta itemprop="description" content="种一棵树最好的时间是十年前，其次是现在。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yzy's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/23/python%E5%8A%A0%E4%B8%8A%E6%B3%A8%E9%87%8A%E8%BF%98%E6%98%AF%E4%B8%AD%E6%96%87%E6%8A%A5%E9%94%99/" class="post-title-link" itemprop="url">python加上注释还是中文报错</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-11-23 14:26:01" itemprop="dateCreated datePublished" datetime="2020-11-23T14:26:01+08:00">2020-11-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-14 19:46:04" itemprop="dateModified" datetime="2021-12-14T19:46:04+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>首先要确保编辑器环境的编码为utf8，打开编码和保存编码都是utf8；其次如果py文件中含有中文字符的话，需要在py文件中对编码进行声明。</p>
<p>A） 设置编辑器编码：UTF-8</p>
<p>B） 修改python文件编码：在py文件首行加上#coding=utf-8，一定要在首行才可以</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Yang Zeyu</p>
  <div class="site-description" itemprop="description">种一棵树最好的时间是十年前，其次是现在。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yang Zeyu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
